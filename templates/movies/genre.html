{% extends "base.html" %}
{% block title %}{{ genre_name }} Movies ‚Äì LUMO{% endblock %}
{% block content %}

<section style="margin-bottom: 40px;">
  <h1 style="margin-bottom: 24px;">{{ genre_name }} Movies</h1>
  
  <!-- Genre Filter Pills -->
  <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 32px;">
    {% for genre in genres %}
    <a href="{{ url_for('main.movies_by_genre', genre_id=genre.id) }}" 
       style="text-decoration: none;">
      <div class="genre-pill {% if genre.id == current_genre_id %}active{% endif %}" 
           style="padding: 10px 18px; border-radius: 12px; 
                  background: {% if genre.id == current_genre_id %}var(--accent){% else %}rgba(255, 255, 255, 0.08){% endif %}; 
                  border: 1px solid {% if genre.id == current_genre_id %}var(--accent){% else %}var(--glass-border){% endif %};
                  color: var(--text-primary); 
                  transition: all 0.2s ease; 
                  cursor: pointer;
                  font-weight: 500;
                  backdrop-filter: blur(20px);
                  -webkit-backdrop-filter: blur(20px);">
        {{ genre.name }}
      </div>
    </a>
    {% endfor %}
  </div>
</section>

<!-- Movies Grid -->
<div class="movie-grid">
  {% for movie in movies %}
    <a href="{{ url_for('movies.movie_detail', movie_id=movie.id) }}" class="card-link">
      <div class="card-glass">
        {% if movie.poster_url %}
        <img src="{{ movie.poster_url }}" alt="{{ movie.title }}" class="movie-poster" />
        {% else %}
        <div class="movie-poster" style="background: linear-gradient(135deg, var(--accent), #0066cc); 
                                        display: flex; align-items: center; justify-content: center; font-size: 3rem;">
          üé¨
        </div>
        {% endif %}
        <div class="movie-title">{{ movie.title }}</div>
        <div class="movie-meta">
          {% if movie.release_date %}{{ movie.release_date[:4] }} ‚Ä¢ {% endif %}
          ‚≠ê {{ movie.vote_average|round(1) }}/10
        </div>
      </div>
    </a>
  {% else %}
    <p style="grid-column: 1 / -1; text-align: center; color: var(--text-secondary); padding: 60px 20px;">
      No movies found in this genre.
    </p>
  {% endfor %}
</div>

<!-- Pagination -->
{% if movies|length >= 20 %}
<div style="display: flex; justify-content: center; gap: 12px; margin-top: 60px;">
  {% if page > 1 %}
  <a href="{{ url_for('main.movies_by_genre', genre_id=current_genre_id, page=page-1) }}" 
     class="btn-secondary" 
     style="padding: 12px 24px;">
    ‚Üê Previous
  </a>
  {% endif %}
  
  <span style="padding: 12px 24px; border-radius: 10px; 
               background: rgba(255, 255, 255, 0.08); 
               border: 1px solid var(--glass-border);
               backdrop-filter: blur(20px);
               -webkit-backdrop-filter: blur(20px);">
    Page {{ page }}
  </span>
  
  <a href="{{ url_for('main.movies_by_genre', genre_id=current_genre_id, page=page+1) }}" 
     class="btn-secondary" 
     style="padding: 12px 24px;">
    Next ‚Üí
  </a>
</div>
{% endif %}

<style>
  .genre-pill:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(10, 132, 255, 0.3);
  }
  
  .genre-pill:not(.active):hover {
    background: rgba(255, 255, 255, 0.12);
  }
</style>

{% endblock %}