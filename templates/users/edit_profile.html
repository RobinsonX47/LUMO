{% extends "base.html" %}
{% block title %}Edit Profile – CineSphere{% endblock %}
{% block content %}

<div style="max-width: 600px; margin: 40px auto;">
  <div class="card-glass" style="padding: 40px;">
    <h1 style="margin-bottom: 8px;">Edit Profile</h1>
    <p style="color: var(--muted); margin-bottom: 32px;">Update your account information</p>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div style="background: rgba(239, 68, 68, 0.15); border: 1px solid rgba(239, 68, 68, 0.4); border-radius: 12px; padding: 12px; margin-bottom: 24px; color: #fca5a5;">
          {% for message in messages %}
            {{ message }}
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('users.edit_profile') }}">
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 8px; font-size: 0.9rem; color: var(--muted);">Full Name</label>
        <input 
          type="text" 
          name="name" 
          value="{{ user.name }}"
          required 
          style="width: 100%; padding: 12px 16px; border-radius: 12px; border: 1px solid rgba(148, 163, 184, 0.3); background: rgba(15, 23, 42, 0.5); color: var(--text); font-size: 1rem;"
        />
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 8px; font-size: 0.9rem; color: var(--muted);">Email (cannot be changed)</label>
        <input 
          type="email" 
          value="{{ user.email }}"
          disabled
          style="width: 100%; padding: 12px 16px; border-radius: 12px; border: 1px solid rgba(148, 163, 184, 0.3); background: rgba(15, 23, 42, 0.3); color: var(--muted); font-size: 1rem;"
        />
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 8px; font-size: 0.9rem; color: var(--muted);">Bio</label>
        <textarea 
          name="bio" 
          rows="4"
          placeholder="Tell us about yourself..."
          style="width: 100%; padding: 12px 16px; border-radius: 12px; border: 1px solid rgba(148, 163, 184, 0.3); background: rgba(15, 23, 42, 0.5); color: var(--text); font-size: 1rem; resize: vertical; font-family: inherit;"
        >{{ user.bio or '' }}</textarea>
      </div>

      <div style="margin-bottom: 24px;">
        <label style="display: block; margin-bottom: 8px; font-size: 0.9rem; color: var(--muted);">New Password (leave blank to keep current)</label>
        <input 
          type="password" 
          name="password" 
          minlength="6"
          placeholder="••••••••"
          style="width: 100%; padding: 12px 16px; border-radius: 12px; border: 1px solid rgba(148, 163, 184, 0.3); background: rgba(15, 23, 42, 0.5); color: var(--text); font-size: 1rem;"
        />
        <small style="color: var(--muted); font-size: 0.8rem;">Minimum 6 characters</small>
      </div>

      <div style="display: flex; gap: 12px;">
        <button 
          type="submit" 
          class="btn-primary"
          style="padding: 14px 32px; border-radius: 12px; border: none; background: linear-gradient(135deg, #7b5cff, #a78bfa); color: white; font-weight: 600; cursor: pointer; font-size: 1rem;"
        >
          Save Changes
        </button>
        
        <a href="{{ url_for('users.profile') }}"
           class="btn-secondary"
           style="display: inline-flex; align-items: center; padding: 14px 24px; border-radius: 12px; border: 1px solid rgba(148, 163, 184, 0.3); background: rgba(15, 23, 42, 0.5); color: var(--text); text-decoration: none; font-size: 1rem;">
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>

<style>
  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 24px rgba(123, 92, 255, 0.4);
  }

  .btn-secondary:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
  }

  input:focus, textarea:focus {
    outline: none;
    border-color: var(--accent);
  }
</style>

{% endblock %}