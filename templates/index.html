{% extends "base.html" %}
{% block title %}LUMO â€“ Discover Movies{% endblock %}
{% block content %}

<!-- Hero Carousel -->
{% if hero_movies %}
<section class="hero-carousel">

  {% for movie in hero_movies %}
  <div class="hero-slide {% if loop.first %}active{% endif %}">

    <!-- Background Image -->
    <img class="hero-bg" src="{{ movie.backdrop_url }}" alt="{{ movie.title }}">

    <!-- Dark Overlays -->
    <div class="hero-overlay-left"></div>
    <div class="hero-overlay-bottom"></div>

    <!-- Slide Content -->
    <div class="slide-content">
      <div class="slide-inner">

        <h1>{{ movie.title }}</h1>

        <div class="meta-row">
          {% if movie.release_date %}
          <span class="badge-pill">ğŸ“… {{ movie.release_date[:4] }}</span>
          {% endif %}
          <span class="badge-pill">â­ {{ movie.vote_average|round(1) }}/10</span>
        </div>

        <p class="slide-description">
          {{ movie.overview[:180] }}{% if movie.overview|length > 180 %}...{% endif %}
        </p>

        <a href="{{ url_for('movies.movie_detail', movie_id=movie.id) }}" class="btn-primary">
          View Details
        </a>

      </div>
    </div>

  </div>
  {% endfor %}

  <!-- Navigation Buttons -->
  <button class="carousel-btn prev">â€¹</button>
  <button class="carousel-btn next">â€º</button>

  <!-- Indicators -->
  <div class="carousel-indicators">
    {% for movie in hero_movies %}
    <button class="{% if loop.first %}active{% endif %}"></button>
    {% endfor %}
  </div>

</section>
{% endif %}

<!-- Trending Movies -->
<section style="margin-bottom: 60px;">
  <h2>ğŸ”¥ Trending This Week</h2>
  <div class="movie-grid">
    {% for movie in trending[:10] %}
    <a href="{{ url_for('movies.movie_detail', movie_id=movie.id) }}" class="card-link">
      <div class="card-glass">
        {% if movie.poster_url %}
        <img src="{{ movie.poster_url }}" alt="{{ movie.title }}" class="movie-poster" />
        {% else %}
        <div class="movie-poster" style="background: linear-gradient(135deg, #1a1a1a, #2d2d2d); display: flex; align-items: center; justify-content: center; font-size: 3rem;">ğŸ¬</div>
        {% endif %}
        <div class="movie-title">{{ movie.title }}</div>
        <div class="movie-meta">
          {% if movie.release_date %}{{ movie.release_date[:4] }} â€¢ {% endif %}
          â­ {{ movie.vote_average|round(1) }}/10
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
</section>

<!-- Top Rated Movies -->
<section style="margin-bottom: 60px;">
  <h2>ğŸ† Top Rated of All Time</h2>
  <div class="movie-grid">
    {% for movie in top_rated[:10] %}
    <a href="{{ url_for('movies.movie_detail', movie_id=movie.id) }}" class="card-link">
      <div class="card-glass">
        {% if movie.poster_url %}
        <img src="{{ movie.poster_url }}" alt="{{ movie.title }}" class="movie-poster" />
        {% else %}
        <div class="movie-poster" style="background: linear-gradient(135deg, #1a1a1a, #2d2d2d); display: flex; align-items: center; justify-content: center; font-size: 3rem;">ğŸ¬</div>
        {% endif %}
        <div class="movie-title">{{ movie.title }}</div>
        <div class="movie-meta">
          {% if movie.release_date %}{{ movie.release_date[:4] }} â€¢ {% endif %}
          â­ {{ movie.vote_average|round(1) }}/10
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
</section>

<!-- Browse by Genre -->
<section>
  <h2>ğŸ­ Browse by Genre</h2>
  <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 16px;">
    {% for genre in genres %}
    <a href="{{ url_for('main.movies_by_genre', genre_id=genre.id) }}" style="text-decoration: none;">
      <div class="card-glass" style="padding: 24px; text-align: center;">
        <div style="font-size: 2rem; margin-bottom: 12px;">ğŸ¬</div>
        <div style="font-weight: 600;">{{ genre.name }}</div>
      </div>
    </a>
    {% endfor %}
  </div>
</section>

{% endblock %}
